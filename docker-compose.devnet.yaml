version: '3.9'

services:
  point_node:
    extends:
      file: docker-compose.yaml
      service: point_node
    depends_on:
      database:
        condition: service_healthy
    volumes:
      - point_contracts_devnet:/app/truffle/build/contracts
      - point_node_data_devnet:/data
    environment:
      - BLOCKCHAIN_URL=https://devnet.pointspace.io
      - CONTRACT_ADDRESS_MIGRATIONS=0x7D694495f89B2E166e67Ab32cfdfC12de0cb29ad
      - CONTRACT_ADDRESS_IDENTITY=0xcb71206EDe92A17770E64D624f7a772e8e620254
      - CONTRACT_ADDRESS_STORAGE_PROVIDER_REGISTRY=0x4F4ce10Ff8acD3B81A6155DA7E9AaAe50bae4CeA
      - ARWEAVE_EXPERIMENT_VERSION_MINOR=9

  database:
    extends:
      file: docker-compose.yaml
      service: database
    volumes:
      - database_data_devnet:/var/lib/postgresql/data/

volumes:
  database_data_devnet:
  point_contracts_devnet:
  point_node_data_devnet:
